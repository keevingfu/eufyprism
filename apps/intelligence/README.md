# Eufy E28 Intelligence Module

æ™ºèƒ½æƒ…æŠ¥ç³»ç»Ÿæ¨¡å—ï¼Œæä¾›å¤šæºæ•°æ®é‡‡é›†ã€ç«å“åˆ†æã€å¸‚åœºæœºä¼šè¯†åˆ«å’Œåˆ†çº§é¢„è­¦åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

### 1. å¤šæºæ•°æ®é‡‡é›†
- **ç”µå•†å¹³å°**: Amazonäº§å“ä»·æ ¼ã€åº“å­˜ã€è¯„ä»·ç›‘æµ‹
- **æœç´¢å¼•æ“**: Googleè¶‹åŠ¿ã€å…³é”®è¯åˆ†æ
- **ç¤¾äº¤åª’ä½“**: Facebookã€Instagramã€Twitterã€Redditã€YouTubeã€TikTokå†…å®¹ç›‘æµ‹
- **è‡ªåŠ¨åŒ–çˆ¬è™«**: ä½¿ç”¨Playwrightå®ç°æ™ºèƒ½æ•°æ®æŠ“å–

### 2. ç«å“åˆ†æ
- å®æ—¶ä»·æ ¼ç›‘æµ‹å’Œå†å²è¶‹åŠ¿
- è¥é”€æ´»åŠ¨è·Ÿè¸ª
- ç”¨æˆ·è¯„ä»·å’Œæƒ…æ„Ÿåˆ†æ
- ç¤¾äº¤åª’ä½“å½±å“åŠ›è¯„ä¼°

### 3. å¸‚åœºæœºä¼šè¯†åˆ«
- **å†…å®¹ç©ºç™½**: é«˜æœç´¢é‡ä½†ç¼ºå°‘å†…å®¹çš„ä¸»é¢˜
- **éœ€æ±‚ç¼ºå£**: å¸‚åœºéœ€æ±‚ä½†ä¾›åº”ä¸è¶³çš„é¢†åŸŸ
- **å­£èŠ‚è¶‹åŠ¿**: åŸºäºå†å²æ•°æ®çš„å­£èŠ‚æ€§é¢„æµ‹
- **æ–°å…´å…³é”®è¯**: å¿«é€Ÿå¢é•¿çš„æœç´¢è¯
- **ç«äº‰å¯¹æ‰‹å¼±ç‚¹**: ç«å“çš„è´Ÿé¢åé¦ˆå’Œå¼±åŠ¿é¢†åŸŸ

### 4. åˆ†çº§é¢„è­¦ç³»ç»Ÿ
- **ğŸŸ¢ ç»¿è‰²**: æ­£å¸¸çŠ¶æ€ï¼Œæ— éœ€è¡ŒåŠ¨
- **ğŸŸ¡ é»„è‰²**: ä½ä¼˜å…ˆçº§ï¼Œå»ºè®®ç›‘æ§
- **ğŸŸ  æ©™è‰²**: ä¸­ç­‰ä¼˜å…ˆçº§ï¼Œå»ºè®®é‡‡å–è¡ŒåŠ¨
- **ğŸ”´ çº¢è‰²**: é«˜ä¼˜å…ˆçº§ï¼Œéœ€è¦ç«‹å³è¡ŒåŠ¨

## æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **Next.js 14**: Reactæ¡†æ¶ï¼Œæ”¯æŒSSR/SSG
- **TypeScript**: ç±»å‹å®‰å…¨
- **Material-UI v5**: UIç»„ä»¶åº“
- **Recharts**: æ•°æ®å¯è§†åŒ–
- **Socket.io**: å®æ—¶é€šä¿¡
- **SWR**: æ•°æ®è·å–å’Œç¼“å­˜

### åç«¯æŠ€æœ¯æ ˆ
- **Elasticsearch**: å…¨æ–‡æœç´¢å’Œæ•°æ®åˆ†æ
- **Playwright**: ç½‘é¡µè‡ªåŠ¨åŒ–å’Œæ•°æ®é‡‡é›†
- **Node-cron**: å®šæ—¶ä»»åŠ¡è°ƒåº¦
- **Axios**: HTTPå®¢æˆ·ç«¯

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 18.0.0
- npm >= 9.0.0
- Elasticsearch 8.x
- Chrome/Chromium (for Playwright)

### å®‰è£…æ­¥éª¤

1. å¤åˆ¶ç¯å¢ƒå˜é‡æ–‡ä»¶
```bash
cp .env.example .env
```

2. é…ç½®ç¯å¢ƒå˜é‡
ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥å¿…è¦çš„APIå¯†é’¥å’Œé…ç½®

3. å®‰è£…ä¾èµ–
```bash
npm install
```

4. å¯åŠ¨Elasticsearch (ä½¿ç”¨Docker)
```bash
docker run -d \
  --name elasticsearch \
  -p 9200:9200 \
  -p 9300:9300 \
  -e "discovery.type=single-node" \
  -e "ELASTIC_PASSWORD=changeme" \
  docker.elastic.co/elasticsearch/elasticsearch:8.11.0
```

5. åˆå§‹åŒ–æ•°æ®åº“ç´¢å¼•
```bash
npm run init-db
```

6. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

è®¿é—® http://localhost:3010/dashboard

## APIç«¯ç‚¹

### è­¦æŠ¥ç®¡ç†
- `GET /api/intelligence/alerts` - è·å–è­¦æŠ¥åˆ—è¡¨
- `POST /api/intelligence/alerts` - åˆ›å»ºæ–°è­¦æŠ¥
- `DELETE /api/intelligence/alerts?id={alertId}` - å¿½ç•¥è­¦æŠ¥

### å¸‚åœºæœºä¼š
- `GET /api/intelligence/opportunities` - è·å–å¸‚åœºæœºä¼š
- `POST /api/intelligence/opportunities` - æ ‡è®°æœºä¼šå·²å¤„ç†

### ç«å“åˆ†æ
- `GET /api/intelligence/competitors` - è·å–ç«å“æ•°æ®
- `GET /api/intelligence/competitors/{id}` - è·å–ç‰¹å®šç«å“è¯¦æƒ…

### æ•°æ®é‡‡é›†
- `POST /api/intelligence/crawl` - æ‰‹åŠ¨è§¦å‘æ•°æ®é‡‡é›†
- `GET /api/intelligence/crawl/status` - è·å–é‡‡é›†ä»»åŠ¡çŠ¶æ€

## æ•°æ®é‡‡é›†é…ç½®

### é‡‡é›†é¢‘ç‡
- **é«˜ä¼˜å…ˆçº§** (æ¯5åˆ†é’Ÿ): Amazonã€Google
- **ä¸­ä¼˜å…ˆçº§** (æ¯30åˆ†é’Ÿ): ç¤¾äº¤åª’ä½“å¹³å°
- **ä½ä¼˜å…ˆçº§** (æ¯å°æ—¶): YouTubeã€TikTokè§†é¢‘å†…å®¹

### çˆ¬è™«è§„åˆ™
- éµå®ˆrobots.txt
- ä½¿ç”¨åˆç†çš„è¯·æ±‚é¢‘ç‡
- å®ç°é‡è¯•å’Œé”™è¯¯å¤„ç†
- ä½¿ç”¨ä»£ç†æ± é¿å…IPå°ç¦

## éƒ¨ç½²è¯´æ˜

### ç”Ÿäº§ç¯å¢ƒé…ç½®
1. ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯
2. é…ç½®Elasticsearché›†ç¾¤
3. è®¾ç½®çˆ¬è™«ä»£ç†æ± 
4. å¯ç”¨HTTPS
5. é…ç½®ç›‘æ§å’Œæ—¥å¿—

### Dockeréƒ¨ç½²
```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build
EXPOSE 3010
CMD ["npm", "start"]
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„æ•°æ®æº
1. åœ¨ `types/intelligence.ts` ä¸­æ·»åŠ æ•°æ®æºæšä¸¾
2. å®ç°çˆ¬è™«é€»è¾‘åœ¨ `services/crawler.ts`
3. æ·»åŠ æ•°æ®å¤„ç†é€»è¾‘åœ¨ `services/analyzer.ts`
4. æ›´æ–°UIç»„ä»¶ä»¥æ˜¾ç¤ºæ–°æ•°æ®

### è‡ªå®šä¹‰è­¦æŠ¥è§„åˆ™
1. ä¿®æ”¹ `services/analyzer.ts` ä¸­çš„ `alertThresholds`
2. å®ç°æ–°çš„åˆ†ææ–¹æ³•
3. æ·»åŠ ç›¸åº”çš„UIå±•ç¤º

## æ•…éšœæ’é™¤

### Elasticsearchè¿æ¥å¤±è´¥
- æ£€æŸ¥Elasticsearchæ˜¯å¦è¿è¡Œ
- éªŒè¯è¿æ¥URLå’Œè®¤è¯ä¿¡æ¯
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### çˆ¬è™«å¤±è´¥
- æ£€æŸ¥ç›®æ ‡ç½‘ç«™æ˜¯å¦å¯è®¿é—®
- éªŒè¯APIå¯†é’¥æ˜¯å¦æœ‰æ•ˆ
- æ£€æŸ¥ä»£ç†è®¾ç½®
- æŸ¥çœ‹é”™è¯¯æ—¥å¿—

### æ€§èƒ½ä¼˜åŒ–
- å¯ç”¨ElasticsearchæŸ¥è¯¢ç¼“å­˜
- ä½¿ç”¨SWRè¿›è¡Œå‰ç«¯æ•°æ®ç¼“å­˜
- å®ç°æ•°æ®åˆ†é¡µ
- ä¼˜åŒ–çˆ¬è™«å¹¶å‘æ•°

## è®¸å¯è¯

æœ¬é¡¹ç›®ä¸ºEufyå†…éƒ¨é¡¹ç›®ï¼Œæœªç»æˆæƒä¸å¾—å¯¹å¤–åˆ†å‘ã€‚